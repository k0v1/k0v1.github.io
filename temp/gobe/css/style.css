/* ========================================================================== */
/* # RESET */
/* ========================================================================== */
@import url("reset.css");

/* ========================================================================== */
/* # FONT FACES */
/* ========================================================================== */
@font-face {
  font-display: swap;
  font-family: 'Gobe Display';
  font-weight: 500;
  src: url('../fonts/GobeDisplayMono.otf') format('opentype');
}

@font-face {
  font-display: swap;
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 100 900;
  src:
    url('../fonts/Roboto-VariableFont_wdth\,wght.ttf') format('truetype');
}

@font-face {
  font-display: swap;
  font-family: 'Roboto';
  font-style: italic;
  font-weight: 100 900;
  src: url('../fonts/Roboto-Italic-VariableFont_wdth\,wght.ttf') format('truetype');
}

@property --menu-opacity {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 0%;
}

/* ========================================================================== */
/* # TOKENS */
/* ========================================================================== */
:root {
/* ## Colors
/* ========================================================================== */
    --black: #212121;
    --light-grey: #BDBDBD;
    --dark-grey: #616161;
    --white: #e0e0e0;
    --teal: #009688;

    --darken-percentage: 15%;

/* ## Typography
/* ========================================================================== */
    --font-family-sans: Roboto, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    --font-family-display: 'Gobe Display', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;

    --font-size: calc(1rem + 0.25vw);
    --line-height: calc(var(--font-size) + 0.5rem);

    --font-size-ratio: 1.618;

    --font-size-xs: calc(var(--font-size) / var(--font-size-ratio));
    --font-size-s: var(--font-size);
    --font-size-m: calc(var(--font-size) * var(--font-size-ratio));
    --font-size-l: calc(var(--font-size-m) * var(--font-size-ratio));
    --font-size-xl: calc(var(--font-size-l) * var(--font-size-ratio));
    --font-size-xxl: calc(var(--font-size-xl) * var(--font-size-ratio));
    --font-size-jumbo: max(var(--font-size-l) + 5vw, var(--font-size-xxl));
    --font-size-jumbo-fluid: max(var(--font-size-xs) + 7.5vw, var(--font-size-l));

/* ## Spacing */
/* ========================================================================== */
    --spacing-ratio: 2;

    --spacing-xs: calc(var(--spacing-s) / var(--spacing-ratio));
    --spacing-s: calc(var(--spacing-m) / var(--spacing-ratio));
    --spacing-m: calc(1 * var(--line-height));
    --spacing-l: calc(var(--spacing-m) * var(--spacing-ratio));
    --spacing-xl: calc(var(--spacing-l) * var(--spacing-ratio));
    --spacing-xxl: calc(var(--spacing-xl) * var(--spacing-ratio));

    --content-max-width: 1200px;

    --site-padding: max(var(--spacing-s), calc((100vw - var(--content-max-width)) / 2));
    --main-nav-height: calc((var(--spacing-l) + var(--spacing-xl)) / 2);

/* ## Animation timing */
/* ========================================================================== */
    --time-xs: 0.150s;
    --time-s: 0.300s;
    --time-m: 0.600s;
    --time-l: 1.200s;
    --time-xl: 2.400s;

    --main-header-animation-range: calc(100svh - 1 * var(--main-nav-height)) calc(100svh - 0 * var(--main-nav-height));
}

/* ========================================================================== */
/* # STYLE */
/* ========================================================================== */

/* ## General
/* ========================================================================== */
body {
  background-color: var(--white);
  color: var(--black);
  font-family: var(--font-family-sans);
  font-size: var(--font-size-s);
  font-weight: 300;
}

p {
  max-width: 50ch;
}

b {
  font-weight: 600;
}

i {
  font-style: italic;
}

h1, h2, h3, h4, h5, h6 { font-weight: 500; }

h1, h2  { font-family: var(--font-family-display); }

h3, h4, h5, h6 { font-family: var(--font-family-sans); }

h1 {font-size: var(--font-size-xl);}
h2 {font-size: var(--font-size-l);}
h3 {font-size: var(--font-size-m);}
h4, h5, h6 {font-size: var(--font-size-s);}

a,
a:active,
a:visited {
  color: var(--teal);
  text-decoration: none;
  &:hover {
    text-decoration: underline;
  }
}

section:not(.full-width) { padding: var(--spacing-xl) var(--site-padding) var(--spacing-xxl) var(--site-padding); }

section:nth-of-type(odd) {
  background-color: var(--black);
  color: var(--white);
}

section:nth-of-type(even) {
  background-color: var(--white);
  color: var(--black);
}

section h2 {
  margin-bottom: var(--spacing-s);
}

hr {
  border-top: var(--black) 0.25px solid;
  border-bottom: none;
  margin-block: var(--spacing-m) var(--spacing-m);
  margin-inline: auto;
  margin-inline: 10%;
}

.section-header {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  gap: var(--spacing-m);
}

.button-primary {
  background-color: var(--teal);
  color: var(--white);
  cursor: pointer;
  font-family: var(--font-family-sans);
  font-size: var(--font-size-s);
  mask-image: url(../img/vector-masks/mask-s-horizontal.svg);
  mask-size: 100% 100%;
  padding: var(--spacing-s) var(--spacing-m);
  text-align: center;
  text-decoration: none;
  transition: background-color var(--time-xs) ease-in-out;
  &:hover {
    background-color: color-mix(in hsl, var(--teal), black var(--darken-percentage, 10%));
    text-decoration: none!important;
  }
}

.section-cta-wrapper {
  align-items: center;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  text-align: center;
  flex-direction: column;
}

/* ## Utilities
/* ========================================================================== */
.right-align { text-align: right; }

.parallax-vertical {
  animation-name: parallax-vertical;
  animation-timeline: view(50vh 0);
  animation-fill-mode: both;
}

@keyframes parallax-vertical {
  from { transform: translateY(0); }
  to { transform: translateY(calc(-1 * var(--spacing-xl))); }
}

/* ## Site navigation */
/* ========================================================================== */
.main-header {
  align-content: center;
  display: flex;
  justify-content: space-between;
  /* padding: var(--spacing-s); */
  nav {
    animation: header-color-change, header-background-color-change;
    animation-timeline: scroll();
    animation-range: var(--main-header-animation-range);
    animation-fill-mode: backwards;
    animation-timing-function: linear;

    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    left: 0;
    align-items: center;
    background-color: rgba(from var(--white) r g b / 1);
    box-shadow: 0 0 var(--spacing-s) var(--spacing-xs) rgba(from var(--black) r g b / 0.25);
    min-height: var(--main-nav-height);
    padding-block: var(--spacing-s);
    padding-inline-start: var(--spacing-s);
    padding-inline-end: var(--spacing-m);
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 1;
    svg {
      animation: logo-fill-change, logo-rotation;
      animation-timeline: scroll();
      animation-range: var(--main-header-animation-range), normal;
      animation-fill-mode: backwards;
      animation-timing-function: linear;

      fill: var(--black);
      height: var(--spacing-l);
      width: var(--spacing-l);
    }
    menu {
      display: flex;
      list-style-type: none;
      margin: 0;
      order: 3;
      padding: 0;
      li {
        /* color: var(--black); */
        font-family: var(--font-family-display);
        font-weight: 500;
        text-transform: uppercase;
        padding: var(--spacing-s);
        text-decoration: none;
        a {
          color: currentcolor;
          text-decoration: none;
          &:hover {
            color: var(--teal);
            text-decoration: none;
          }
        }
      }
    }
  }
}

#hamburger {
  background: none;
  border: none;
  cursor: pointer;
  display: none;
  order: 3;
}

#hamburger > span {
  --icon-stroke-width: 2px;
  --icon-size: var(--font-size-s);
  
  --icon-point-coordinate-a: calc(15% - 0.5 * var(--icon-stroke-width)); /*  5 */
  --icon-point-coordinate-b: calc(15% + 0.5 * var(--icon-stroke-width)); /* 25 */
  --icon-point-coordinate-c: calc(50% - 0.5 * var(--icon-stroke-width)); /* 40 */
  --icon-point-coordinate-d: calc(50% + 0.5 * var(--icon-stroke-width)); /* 60 */
  --icon-point-coordinate-e: calc(85% - 0.5 * var(--icon-stroke-width)); /* 75 */
  --icon-point-coordinate-f: calc(85% + 0.5 * var(--icon-stroke-width)); /* 95 */

  animation: hamburger-color-change;
  animation-timeline: scroll();
  animation-range: var(--main-header-animation-range);
  animation-fill-mode: backwards;
  animation-timing-function: ease-in;
  
  background-color: var(--black);
  clip-path: polygon(0% var(--icon-point-coordinate-a),100% var(--icon-point-coordinate-a),100% var(--icon-point-coordinate-b),0% var(--icon-point-coordinate-b),0% var(--icon-point-coordinate-c),100% var(--icon-point-coordinate-c),100% var(--icon-point-coordinate-d),0% var(--icon-point-coordinate-d),0% var(--icon-point-coordinate-e),100% var(--icon-point-coordinate-e),100% var(--icon-point-coordinate-f),0% var(--icon-point-coordinate-f));
  display: block;
  width: var(--icon-size);
  height: var(--icon-size);
}

@keyframes header-color-change {
  from { color: var(--white); }
  to { color: var(--black); }
}

@keyframes header-background-color-change {
  from { background-color: rgba(from var(--white) r g b / 0); box-shadow: 0 0 var(--spacing-s) var(--spacing-xs) rgba(from var(--black) r g b / 0); }
  to { background-color: rgba(from var(--white) r g b / 1); box-shadow: 0 0 var(--spacing-s) var(--spacing-xs) rgba(from var(--black) r g b / 0.25); }
}

@keyframes hamburger-color-change {
  from { background-color: var(--white); }
  to { background-color: var(--black); }
}

@keyframes logo-fill-change {
  from { fill: var(--white); }
  to { fill: var(--black); }
}

@keyframes logo-rotation {
  from { transform: rotate(0deg); }
  to { transform: rotate(-720deg); }
}


/* ## Hero section */
/* ========================================================================== */
.hero {
  color: var(--white);
  .hero-cell {
    background-size: cover;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-s);
    height: 100vh;
    justify-content: center;
    padding: var(--spacing-xl) var(--spacing-s);
    text-align: center;
    width: 100vw;
    div {
      padding-block: var(--spacing-s);
    }
  }
  h2 { font-size: var(--font-size-l); padding-block: var(--spacing-s) }
  p { font-size: var(--font-size-m); }
  .events { background-image: linear-gradient(rgba(from var(--black) r g b / 0.75) 0%, rgba(from var(--black) r g b / 0) 50%), url('../img/hero/events.jpg'); background-position: center; justify-content: space-between;}
  .music { background-image: url('../img/hero/music_a2.jpg'); background-position: center; }
  .shop { background-image: linear-gradient(0deg, rgba(from var(--black) r g b / 0.75) 0%, rgba(from var(--black) r g b / 0) 50%), url('../img/hero/shop_a2.jpg'); background-position: center; justify-content: end; }
}

.flickity-viewport {
  position: relative;
}

.flickity-page-dots {
  position: absolute;
  bottom: var(--spacing-xl)
}

/* ## Events */
/* ========================================================================== */
.events {
  .table {
    display: grid;
    gap: var(--spacing-s);
    grid-template-columns: auto auto 1fr;
    flex-direction: column;
    margin-block: var(--spacing-l);
    a { text-align: right; }
    div {
      p:nth-of-type(1) { font-family: var(--font-family-display); }
      p:nth-of-type(2) { font-size: var(--font-size-xs); }
    }
  }
}

/* ## Music
/* ========================================================================== */

.music-grid {
  display: grid;
  gap: var(--spacing-s);
  grid-template-columns: repeat(auto-fit, minmax(min(250px, calc(100vw - 2 * var(--site-padding))), 1fr));
  margin-block: var(--spacing-l);
  figure {
    cursor: pointer;
    display: grid;
    mask-image: url(../img/vector-masks/mask-m-square.svg);
    mask-size: 100% 100%;
    overflow: hidden;
    transition: all var(--time-s) ease-in-out;
    img, figcaption {
      grid-column: 1;
      grid-row: 1;
      width: 100%;
    }
    figcaption {
      align-self: stretch;
      background: linear-gradient(0deg, rgba(from var(--black) r g b / 0.75), rgba(from var(--black) r g b / 0));
      color: var(--white);
      display: grid;
      opacity: 0;
      padding: var(--spacing-xs);
      transform: translateY(+25%);
      transition: all var(--time-s) ease-in-out;
      div { align-self: end; }
    }
  }
  &:has(figure:hover) {
    figure:not(:hover) {
      filter: saturate(0);
      opacity: 0.25;
      transform: scale(0.85);
      figcaption {
        opacity: 0;
      }
    }
    figure:hover {
      figcaption {
        opacity: 1;
        transform: translateY(0);
      }
    }
  }
}

/* ## Shop
/* ========================================================================== */
.shop-grid {
  display: grid;
  gap: var(--spacing-s);
  grid-template-columns: repeat(auto-fit, minmax(min(360px, calc(100vw - 2 * var(--site-padding))), 1fr));
  margin-block: var(--spacing-l);
  figure {
    cursor: pointer;
    display: grid;
    grid-template-rows: auto 1fr;
    padding-block: var(--spacing-s);
    transition: all var(--time-s) ease-in-out;
    &:hover {
      figcaption > h4 {
        color: var(--teal);
      }
    }
    figcaption {
      display: flex;
      flex-direction: column;
      margin-top: var(--spacing-s);
      h4 {
        transition: all var(--time-s) ease-in-out;
      }
    }
    img {
      aspect-ratio: 3 / 4;
      mask-image: url(../img/vector-masks/mask-m-vertical.svg);
      mask-size: 100% 100%;
      object-fit: cover;
    }
  }
  &:has(figure:hover) {
    figure:not(:hover) {
      filter: saturate(0);
      opacity: 0.5;
      transform: scale(0.85);
    }
  }
}

/* ## Closing
/* ========================================================================== */
.closing {
  background-color: rgba(0, 0, 0, 0)!important;
  img {
    object-fit: cover;
    object-position: center;
    position: relative;
    top: 54px;
  }
}

/* ## Footer
/* ========================================================================== */
.footer {
  background-color: var(--light-grey);
  font-size: var(--font-size-xs);
  padding: var(--spacing-xl) var(--site-padding) var(--spacing-xl) var(--site-padding);
  div:first-of-type {
    display: grid;
    gap: var(--spacing-s);
    grid-template-columns: repeat(auto-fit, minmax(265px, 1fr));
    article {
      display: grid;
      grid-template-columns: 1fr 1fr;
      padding: var(--spacing-s);
      p:first-of-type {
        justify-self: end;
        font-weight: 600;
        padding-right: var(--spacing-s);
        width: max-content;
      }
      ul {
        border-left: var(--black) 1px solid;
        list-style-type: none;
        padding-left: var(--spacing-s);
        li {
          width: max-content;
        }
      }
    }
  }
  div:last-of-type {
    display: flex;
    gap: var(--spacing-s);
    justify-content: center;
    padding-block-start: var(--spacing-s);
  }
}

.tiles {
  padding-top: calc(100vw / 4.3);
  overflow: clip;
  h2 {
    display: grid;
    font-size: calc(100vw / 4.3);
    grid-template-columns: repeat(5, 1fr);
    justify-content: center;
    line-height: 0.8em;
    row-gap: 0.75rem;
    span {
      overflow: visible;
      margin-right: var(--spacing-s);
      padding-bottom: 1.75rem;
      margin-bottom: -1.75rem;
    }
  }
}

.tiles > h2 > span {
  animation-timeline: view(0% -25%);
  /* Applying ease-out-in-sine to fake linear rotation of the visible edges. */
  /* animation-timing-function: cubic-bezier(0.050, 0.445, 0.950, 0.550); */
  animation-fill-mode: both;
}

@keyframes fake-mask-rotation-1 {
  from { clip-path: polygon(200% 100%, 200% 100%, 0% 100%); transform: translateX(25%); }
  to { clip-path: polygon(0% -100%, 200% 100%, 0% 100%); transform: translateX(0%);}
}

@keyframes fake-mask-rotation-2 {
  from { clip-path: polygon(0% 200%, 0% 0%, 0% 200%); transform: translateY(25%); }
  to { clip-path: polygon(200% 0%, 0% 0%, 0% 200%); transform: translateY(0%); }
}

@keyframes fake-mask-rotation-3 {
  from { clip-path: polygon(-100% 0%, -100% 0%, 100% 0%); transform: translateX(-25%); }
  to   { clip-path: polygon(100% 200%, -100% 0%, 100% 0%); transform: translateX(0%); }
}

@keyframes fake-mask-rotation-4 { 
  from { clip-path: polygon(100% -100%, 100% -100%, 100% 100%); transform: translateY(-25%); }
  to   { clip-path: polygon(-100% 100%, 100% -100%, 100% 100%); transform: translateY(0%); }
}

@keyframes fade-in {
  0% { opacity: 0; }
  100% { opacity: 1; }
}

.tiles > h2 > span:nth-of-type(1n) { animation-name: fake-mask-rotation-1; }
.tiles > h2 > span:nth-of-type(2n) { animation-name: fake-mask-rotation-2; }
.tiles > h2 > span:nth-of-type(3n) { animation-name: fake-mask-rotation-3; }
.tiles > h2 > span:nth-of-type(4n) { animation-name: fake-mask-rotation-4; }

.tiles > h2 > span:nth-of-type( 1n) { animation-delay: 0.00s; }
.tiles > h2 > span:nth-of-type( 2n) { animation-delay: 0.15s; }
.tiles > h2 > span:nth-of-type( 3n) { animation-delay: 0.30s; }
.tiles > h2 > span:nth-of-type( 4n) { animation-delay: 0.45s; }
.tiles > h2 > span:nth-of-type( 5n) { animation-delay: 0.60s; }
.tiles > h2 > span:nth-of-type( 6n) { animation-delay: 0.75s; }

/* ## Media queries */
/* ========================================================================== */
@media (max-width: 50rem) {

  .hero {
    .music { justify-content: end; }
    .shop {background-position: center;}
  }

  .tiles {
    padding-top: calc(100vw / 2.58);
    overflow: clip;
    h2 {
      font-size: calc(100vw / 2.58);
      grid-template-columns: repeat(3, 1fr);
    }
  }

  #hamburger {
    display: block;
  }

  h1, h2, h3, h4, h5, h6 {
    hyphens: manual;
  }
  
  menu {
    align-items: end;
    flex-direction: column;
    flex-shrink: 0;
    font-size: 2rem;
    height: 0;
    line-height: 2.5rem;
    overflow: hidden;
    opacity: 1;
    transition: all var(--time-s) ease-in-out;
    width: 100%;
  }
  
  .menu-show {
    height: 100vh;
    margin-top: var(--spacing-s);
    opacity: 1;
    transition: all var(--time-m) ease-in-out;
  }
  
  body > nav {
    transition: all var(--time-s) ease-in-out;
  }
  
  .nav-open {
    backdrop-filter: blur(2rem);
    transition: all var(--time-m) ease-in-out;
  }

}
